<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fzf.game.mapper.ShopMapper">
  <resultMap id="BaseShopMap" type="com.fzf.game.domain.entity.Shop">
    <!--@mbg.generated-->
    <id column="shop_id" jdbcType="INTEGER" property="shopId" />
    <result column="shop_name" jdbcType="VARCHAR" property="shopName" />
    <result column="big_type_id" jdbcType="INTEGER" property="bigTypeId" />
    <result column="shop_descripe" jdbcType="VARCHAR" property="shopDescripe" />
    <result column="shop_stock" jdbcType="INTEGER" property="shopStock" />
    <result column="original_price" jdbcType="DOUBLE" property="originalPrice" />
    <result column="present_price" jdbcType="DOUBLE" property="presentPrice" />
  </resultMap>
  <select id="findByKeyWord" resultMap="BaseShopMap">
    select * from shop
    where shop_name like '%#{keyword}%'
  </select>
  <select id="findShop" resultType="com.fzf.game.domain.vo.ShopVo">
    select * from shop s
    left join big_type b on s.big_type_id =b.big_type_id
    left join small_type s1 on s1.big_type_id= b.big_type_id
    LEFT JOIN concrete_type c on c.small_type_id = s1.small__type_id
    left join shop_image si on s.shop_id = si.shop_id
    where  s.shop_id=c.shop_id and s.shop_id = #{shopId}
  </select>

</mapper>